<template>
  <div class="unified-image-manager">
    <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->
    <v-card variant="flat" class="toolbar-card mb-4">
      <v-card-text class="pa-4">
        <!-- Èù¢ÂåÖÂ±ëÂØºËà™ÂíåÊêúÁ¥¢ -->
        <div class="d-flex align-center mb-3">
          <!-- Èù¢ÂåÖÂ±ëÂØºËà™ -->
          <v-breadcrumbs :items="breadcrumbItems" class="pa-0 flex-grow-1" divider="/">
            <template #item="{ item }">
              <v-breadcrumbs-item :disabled="item.disabled" @click="navigateToPath(item.path)" class="breadcrumb-item">
                {{ item.title }}
              </v-breadcrumbs-item>
            </template>
          </v-breadcrumbs>

          <!-- ÊêúÁ¥¢Ê°Ü -->
          <v-text-field
            v-model="searchQuery"
            placeholder="ÊêúÁ¥¢ÂõæÁâá..."
            :prepend-inner-icon="searchLoading ? undefined : 'mdi-magnify'"
            variant="outlined"
            density="compact"
            style="max-width: 300px"
            hide-details
            clearable
            @input="onSearchInput"
          >
            <template v-if="searchLoading" #prepend-inner>
              <v-progress-circular indeterminate size="20" />
            </template>
          </v-text-field>
        </div>

        <!-- Âø´ÈÄüÊìç‰ΩúÊ†è -->
        <div class="d-flex align-center">
          <!-- ÂØºËà™ÊåâÈíÆ -->
          <v-btn variant="text" size="small" prepend-icon="mdi-arrow-left" :disabled="!canGoBack" @click="goBack"> ËøîÂõû‰∏äÁ∫ß </v-btn>

          <v-btn variant="text" size="small" prepend-icon="mdi-home" @click="goToRoot"> Ê†πÁõÆÂΩï </v-btn>

          <v-btn variant="text" size="small" prepend-icon="mdi-refresh" @click="refreshContent"> Âà∑Êñ∞ </v-btn>

          <v-spacer />

          <!-- ËßÜÂõæÂàáÊç¢ -->
          <v-btn-toggle v-model="viewMode" variant="outlined" density="compact" mandatory>
            <v-btn value="grid" icon="mdi-view-grid" title="ÁΩëÊ†ºËßÜÂõæ" />
            <v-btn value="list" icon="mdi-view-list" title="ÂàóË°®ËßÜÂõæ" />
          </v-btn-toggle>

          <!-- Á≠õÈÄâÂíåÊéíÂ∫è -->
          <v-menu>
            <template #activator="{ props }">
              <v-btn variant="text" icon="mdi-filter-variant" v-bind="props" title="Á≠õÈÄâÂíåÊéíÂ∫è" />
            </template>
            <v-card min-width="250">
              <v-card-text>
                <v-select v-model="sortBy" :items="sortOptions" label="ÊéíÂ∫èÊñπÂºè" density="compact" variant="outlined" />
                <v-select
                  v-model="fileTypeFilter"
                  :items="fileTypeOptions"
                  label="Êñá‰ª∂Á±ªÂûã"
                  density="compact"
                  variant="outlined"
                  multiple
                  chips
                />
              </v-card-text>
            </v-card>
          </v-menu>
        </div>

        <!-- ÊêúÁ¥¢ÁªìÊûúÊèêÁ§∫ -->
        <v-alert v-if="isSearching && searchResults.length > 0" type="info" variant="tonal" class="mt-3" density="compact">
          ÊâæÂà∞ {{ searchResults.length }} ‰∏™ÊêúÁ¥¢ÁªìÊûú
          <template #append>
            <v-btn size="small" variant="text" @click="clearSearch"> Ê∏ÖÈô§ÊêúÁ¥¢ </v-btn>
          </template>
        </v-alert>
      </v-card-text>
    </v-card>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
    <div class="content-area">
      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
      <div v-if="loading" class="text-center py-8">
        <v-progress-circular indeterminate size="48" />
        <p class="mt-4">Âä†ËΩΩ‰∏≠...</p>
      </div>

      <!-- ÂÜÖÂÆπÊòæÁ§∫ -->
      <template v-else>
        <!-- Êñá‰ª∂Â§πÊòæÁ§∫ -->
        <div v-if="!isSearching && displayFolders.length > 0" class="folders-section mb-6">
          <h4 class="text-subtitle-1 mb-3 d-flex align-center">
            <v-icon icon="mdi-folder" class="me-2" />
            Êñá‰ª∂Â§π ({{ displayFolders.length }})
          </h4>
          <v-row>
            <v-col v-for="folder in displayFolders" :key="folder.path" cols="6" sm="4" md="3" lg="2">
              <v-card variant="tonal" class="folder-card" @click="navigateToFolder(folder)">
                <v-card-text class="text-center pa-4">
                  <v-icon icon="mdi-folder" size="48" color="primary" class="mb-2" />
                  <div class="text-subtitle-2 font-weight-medium text-truncate">
                    {{ folder.name }}
                  </div>
                  <div class="text-caption text-medium-emphasis">Êñá‰ª∂Â§π</div>
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>
        </div>

        <!-- ÂõæÁâáÊòæÁ§∫ -->
        <div v-if="displayImages.length > 0" class="images-section">
          <h4 class="text-subtitle-1 mb-3 d-flex align-center">
            <v-icon icon="mdi-image-multiple" class="me-2" />
            {{ isSearching ? 'ÊêúÁ¥¢ÁªìÊûú' : 'ÂõæÁâá' }} ({{ displayImages.length }})
          </h4>

          <!-- ÁΩëÊ†ºËßÜÂõæ -->
          <v-row v-if="viewMode === 'grid'" class="image-grid">
            <v-col v-for="(image, index) in displayImages" :key="image.sha" cols="6" sm="4" md="3" lg="3" xl="2" class="image-col">
              <v-card
                class="image-card"
                :class="{ 'image-card--selected': selectedItems.includes(image.sha) }"
                elevation="2"
                @click="openImagePreview(image, index)"
              >
                <!-- ÈÄâÊã©Ê°Ü -->
                <v-checkbox
                  :model-value="selectedItems.includes(image.sha)"
                  @update:model-value="toggleSelection(image.sha, $event)"
                  @click.stop
                  class="selection-checkbox"
                  hide-details
                  density="compact"
                />

                <!-- ÂõæÁâá -->
                <v-img :src="getImageUrl(image)" :alt="image.name" height="200" cover class="image-content">
                  <template #placeholder>
                    <div class="d-flex align-center justify-center fill-height">
                      <v-progress-circular indeterminate size="32" color="primary" />
                    </div>
                  </template>

                  <template #error>
                    <div class="d-flex align-center justify-center fill-height">
                      <v-icon icon="mdi-image-broken" size="48" color="grey" />
                    </div>
                  </template>

                  <!-- ÊÇ¨ÂÅúÊìç‰ΩúÂ±Ç -->
                  <div class="image-overlay">
                    <div class="overlay-actions">
                      <v-btn
                        icon="mdi-eye"
                        variant="elevated"
                        color="primary"
                        size="small"
                        @click.stop="openImagePreview(image, index)"
                        title="È¢ÑËßà"
                      />
                      <v-btn
                        icon="mdi-download"
                        variant="elevated"
                        color="success"
                        size="small"
                        @click.stop="downloadImage(image)"
                        title="‰∏ãËΩΩ"
                      />
                      <v-btn
                        v-if="canDelete"
                        icon="mdi-delete"
                        variant="elevated"
                        color="error"
                        size="small"
                        @click.stop="deleteImage(image, index)"
                        title="Âà†Èô§"
                      />
                    </div>
                  </div>
                </v-img>

                <!-- ÂõæÁâá‰ø°ÊÅØ -->
                <v-card-text class="pa-3">
                  <div class="text-subtitle-2 text-truncate mb-1" :title="image.name">
                    {{ image.name }}
                  </div>
                  <div class="text-caption text-medium-emphasis">{{ formatFileSize(image.size) }} ‚Ä¢ {{ getFileType(image.name) }}</div>
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>

          <!-- ÂàóË°®ËßÜÂõæ -->
          <v-card v-else-if="viewMode === 'list'">
            <v-list>
              <v-list-item v-for="(image, index) in displayImages" :key="image.sha" @click="openImagePreview(image, index)">
                <template #prepend>
                  <v-checkbox
                    :model-value="selectedItems.includes(image.sha)"
                    @update:model-value="toggleSelection(image.sha, $event)"
                    @click.stop
                    hide-details
                    density="compact"
                  />
                  <v-avatar size="48" class="me-3">
                    <v-img :src="getImageUrl(image)" />
                  </v-avatar>
                </template>

                <v-list-item-title>{{ image.name }}</v-list-item-title>
                <v-list-item-subtitle>
                  {{ formatFileSize(image.size) }} ‚Ä¢ {{ getFileType(image.name) }}
                  <span v-if="isSearching && image.directory" class="ml-2"> üìÅ {{ image.directory }} </span>
                </v-list-item-subtitle>

                <template #append>
                  <v-btn icon="mdi-eye" variant="text" size="small" @click.stop="openImagePreview(image, index)" />
                  <v-btn icon="mdi-download" variant="text" size="small" @click.stop="downloadImage(image)" />
                  <v-btn
                    v-if="canDelete"
                    icon="mdi-delete"
                    variant="text"
                    size="small"
                    color="error"
                    @click.stop="deleteImage(image, index)"
                  />
                </template>
              </v-list-item>
            </v-list>
          </v-card>
        </div>

        <!-- Á©∫Áä∂ÊÄÅ -->
        <div v-if="displayFolders.length === 0 && displayImages.length === 0" class="empty-state">
          <EmptyState
            :icon="isSearching ? 'mdi-magnify' : 'mdi-folder-open-outline'"
            :title="isSearching ? 'Êú™ÊâæÂà∞ÊêúÁ¥¢ÁªìÊûú' : 'Êñá‰ª∂Â§π‰∏∫Á©∫'"
            :description="isSearching ? 'Â∞ùËØï‰ΩøÁî®‰∏çÂêåÁöÑÂÖ≥ÈîÆËØçÊêúÁ¥¢' : 'ÂΩìÂâçÊñá‰ª∂Â§π‰∏≠Ê≤°Êúâ‰ªª‰ΩïÂÜÖÂÆπ'"
            :show-action="false"
          />
        </div>
      </template>
    </div>

    <!-- ÂõæÁâáÈ¢ÑËßàÁÅØÁÆ± -->
    <ImageLightbox
      v-model="showLightbox"
      :images="lightboxImages"
      :current-index="currentLightboxIndex"
      @update:current-index="currentLightboxIndex = $event"
    />

    <!-- ÊâπÈáèÊìç‰ΩúÊ†è -->
    <v-slide-y-reverse-transition>
      <v-card v-if="selectedItems.length > 0" variant="elevated" class="batch-actions-bar">
        <v-card-text class="d-flex align-center pa-4">
          <span class="text-subtitle-2"> Â∑≤ÈÄâÊã© {{ selectedItems.length }} ‰∏™È°πÁõÆ </span>
          <v-spacer />
          <v-btn variant="text" @click="clearSelection">ÂèñÊ∂àÈÄâÊã©</v-btn>
          <v-btn variant="text" prepend-icon="mdi-download">ÊâπÈáè‰∏ãËΩΩ</v-btn>
          <v-btn v-if="canDelete" variant="text" color="error" prepend-icon="mdi-delete" @click="batchDelete"> ÊâπÈáèÂà†Èô§ </v-btn>
        </v-card-text>
      </v-card>
    </v-slide-y-reverse-transition>
  </div>
</template>

<script setup lang="ts">
import EmptyState from '@/components/EmptyState.vue'
import ImageLightbox from '@/components/ImageLightbox.vue'
import ImagePreview from '@/components/ImagePreview.vue'
import filesize from '@/libs/filesize'
import { searchInRepository } from '@/plugins/axios/search'
import { useSnackBarStore } from '@/plugins/stores/snackbar'
import { computed, ref, watch } from 'vue'

interface ImageItem {
  name: string
  path: string
  sha: string
  size: number
  type: string
  directory?: string
}

interface FolderItem {
  name: string
  path: string
  type: string
}

interface Props {
  currentPath: string
  folders: FolderItem[]
  images: ImageItem[]
  loading?: boolean
  username: string
  repository: string
  canDelete?: boolean
  getCdnUrlItems?: (username: string, repository: string, directory: string, filename: string) => { text: string }[]
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  canDelete: false,
  getCdnUrlItems: undefined
})

const emit = defineEmits<{
  navigate: [path: string]
  refresh: []
  delete: [image: ImageItem, index: number]
  'folder-selected': [folder: FolderItem]
}>()

const { showMessage } = useSnackBarStore()

// Áä∂ÊÄÅÁÆ°ÁêÜ
const searchQuery = ref('')
const searchResults = ref<ImageItem[]>([])
const viewMode = ref<'grid' | 'list'>('grid')
const sortBy = ref('name-asc')
const fileTypeFilter = ref<string[]>([])
const selectedItems = ref<string[]>([])
const showLightbox = ref(false)
const currentLightboxIndex = ref(0)

// ÊêúÁ¥¢Áä∂ÊÄÅ
const isSearching = computed(() => searchQuery.value.trim().length > 0)

// ÊéíÂ∫èÈÄâÈ°π
const sortOptions = [
  { title: 'ÂêçÁß∞ A-Z', value: 'name-asc' },
  { title: 'ÂêçÁß∞ Z-A', value: 'name-desc' },
  { title: 'Â§ßÂ∞è Â∞è-Â§ß', value: 'size-asc' },
  { title: 'Â§ßÂ∞è Â§ß-Â∞è', value: 'size-desc' }
]

// Êñá‰ª∂Á±ªÂûãÈÄâÈ°π
const fileTypeOptions = [
  { title: 'JPG', value: 'jpg' },
  { title: 'PNG', value: 'png' },
  { title: 'GIF', value: 'gif' },
  { title: 'WebP', value: 'webp' },
  { title: 'SVG', value: 'svg' }
]

// Èù¢ÂåÖÂ±ëÂØºËà™
const breadcrumbItems = computed(() => {
  const parts = props.currentPath.split('/').filter(Boolean)
  const items = [{ title: 'Ê†πÁõÆÂΩï', path: '/', disabled: false }]

  let currentPath = ''
  for (const part of parts) {
    currentPath += `/${part}`
    items.push({
      title: part,
      path: currentPath,
      disabled: false
    })
  }

  // ÊúÄÂêé‰∏ÄÈ°πËÆæ‰∏∫Á¶ÅÁî®
  if (items.length > 0) {
    items[items.length - 1].disabled = true
  }

  return items
})

// ÊòØÂê¶ÂèØ‰ª•ËøîÂõû‰∏äÁ∫ß
const canGoBack = computed(() => props.currentPath !== '/')

// ÊòæÁ§∫ÁöÑÊñá‰ª∂Â§πÂíåÂõæÁâá
const displayFolders = computed(() => {
  if (isSearching.value) {
    return []
  }
  return props.folders
})

const displayImages = computed(() => {
  let images = isSearching.value ? searchResults.value : props.images

  // Êñá‰ª∂Á±ªÂûãÁ≠õÈÄâ
  if (fileTypeFilter.value.length > 0) {
    images = images.filter(image => {
      const ext = image.name.split('.').pop()?.toLowerCase()
      return ext && fileTypeFilter.value.includes(ext)
    })
  }

  // ÊéíÂ∫è
  images = [...images].sort((a, b) => {
    switch (sortBy.value) {
      case 'name-asc':
        return a.name.localeCompare(b.name)
      case 'name-desc':
        return b.name.localeCompare(a.name)
      case 'size-asc':
        return a.size - b.size
      case 'size-desc':
        return b.size - a.size
      default:
        return 0
    }
  })

  return images
})

// ÁÅØÁÆ±ÂõæÁâáÊï∞ÊçÆ
const lightboxImages = computed(() => {
  return displayImages.value.map(image => ({
    name: image.name,
    path: image.path,
    sha: image.sha,
    size: image.size,
    url: getImageUrl(image)
  }))
})

// ÊñπÊ≥ï
const navigateToPath = (path: string) => {
  emit('navigate', path)
}

const navigateToFolder = (folder: FolderItem) => {
  const newPath = props.currentPath === '/' ? `/${folder.name}` : `${props.currentPath}/${folder.name}`
  emit('navigate', newPath)
  emit('folder-selected', folder)
}

const goBack = () => {
  const parts = props.currentPath.split('/').filter(Boolean)
  parts.pop()
  const newPath = parts.length > 0 ? `/${parts.join('/')}` : '/'
  emit('navigate', newPath)
}

const goToRoot = () => {
  emit('navigate', '/')
}

const refreshContent = () => {
  emit('refresh')
}

// ÊêúÁ¥¢ÂäüËÉΩ
const searchLoading = ref(false)
let searchTimeout: number | null = null

const onSearchInput = () => {
  // Ê∏ÖÈô§‰πãÂâçÁöÑÊêúÁ¥¢ÂÆöÊó∂Âô®
  if (searchTimeout) {
    clearTimeout(searchTimeout)
  }

  if (searchQuery.value.trim()) {
    // Èò≤ÊäñÊêúÁ¥¢Ôºå500ms ÂêéÊâßË°å
    searchTimeout = setTimeout(() => {
      performSearch()
    }, 500)
  } else {
    searchResults.value = []
  }
}

const performSearch = async () => {
  if (!searchQuery.value.trim()) {
    return
  }

  try {
    searchLoading.value = true
    const results = await searchInRepository(props.username, props.repository, searchQuery.value.trim(), {
      fileTypes: fileTypeFilter.value,
      sortBy: sortBy.value,
      maxResults: 100
    })

    // ËΩ¨Êç¢ÊêúÁ¥¢ÁªìÊûúÊ†ºÂºè
    searchResults.value = results.map(result => ({
      ...result,
      directory: result.path.substring(0, result.path.lastIndexOf('/')) || '/'
    }))

    showMessage(`ÊâæÂà∞ ${results.length} ‰∏™ÊêúÁ¥¢ÁªìÊûú`, { color: 'success' })
  } catch (error) {
    console.error('ÊêúÁ¥¢Â§±Ë¥•:', error)
    showMessage('ÊêúÁ¥¢Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï', { color: 'error' })
    searchResults.value = []
  } finally {
    searchLoading.value = false
  }
}

const clearSearch = () => {
  searchQuery.value = ''
  searchResults.value = []
}

// ÂõæÁâáÊìç‰Ωú
const getImageUrl = (image: ImageItem) => {
  if (props.getCdnUrlItems) {
    try {
      const directory = image.path.substring(0, image.path.lastIndexOf('/')) || '/'
      const filename = image.name
      const cdnUrls = props.getCdnUrlItems(props.username, props.repository, directory, filename)
      return cdnUrls && cdnUrls.length > 0 ? cdnUrls[0].text : ''
    } catch (error) {
      console.error('ÁîüÊàêCDN URLÂ§±Ë¥•:', error)
    }
  }
  // Â§áÁî®ÊñπÊ°à
  return `https://cdn.jsdelivr.net/gh/${props.username}/${props.repository}@master${image.path}`
}

const openImagePreview = (image: ImageItem, index: number) => {
  currentLightboxIndex.value = index
  showLightbox.value = true
}

const downloadImage = async (image: ImageItem) => {
  try {
    const url = getImageUrl(image)
    const response = await fetch(url)
    const blob = await response.blob()
    const downloadUrl = URL.createObjectURL(blob)

    const a = document.createElement('a')
    a.href = downloadUrl
    a.download = image.name
    a.click()

    URL.revokeObjectURL(downloadUrl)
    showMessage('‰∏ãËΩΩÊàêÂäü', { color: 'success' })
  } catch (error) {
    showMessage('‰∏ãËΩΩÂ§±Ë¥•', { color: 'error' })
  }
}

const deleteImage = (image: ImageItem, index: number) => {
  emit('delete', image, index)
}

// ÈÄâÊã©ÂäüËÉΩ
const toggleSelection = (sha: string, selected: boolean) => {
  if (selected) {
    selectedItems.value.push(sha)
  } else {
    const index = selectedItems.value.indexOf(sha)
    if (index > -1) {
      selectedItems.value.splice(index, 1)
    }
  }
}

const clearSelection = () => {
  selectedItems.value = []
}

const batchDelete = () => {
  // ÂÆûÁé∞ÊâπÈáèÂà†Èô§ÈÄªËæë
  showMessage(`Â∞ÜÂà†Èô§ ${selectedItems.value.length} ‰∏™È°πÁõÆ`, { color: 'warning' })
}

// Â∑•ÂÖ∑ÂáΩÊï∞
const formatFileSize = (bytes: number) => {
  return filesize(bytes)
}

const getFileType = (filename: string) => {
  const ext = filename.split('.').pop()?.toUpperCase()
  return ext || 'Unknown'
}

// ÁõëÂê¨Ë∑ØÂæÑÂèòÂåñÔºåÊ∏ÖÈô§ÊêúÁ¥¢
watch(
  () => props.currentPath,
  () => {
    clearSearch()
    clearSelection()
  }
)
</script>

<style scoped lang="scss">
.unified-image-manager {
  .toolbar-card {
    border: 1px solid rgba(var(--v-border-color), var(--v-border-opacity));
  }

  .breadcrumb-item {
    cursor: pointer;

    &:hover {
      color: rgb(var(--v-theme-primary));
    }
  }

  .folder-card {
    cursor: pointer;
    transition: all 0.3s ease;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
  }

  // ÂõæÁâáÁΩëÊ†ºÊ†∑Âºè
  .image-grid {
    .image-col {
      padding: 8px;
    }

    .image-card {
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      border-radius: 12px;
      overflow: hidden;
      position: relative;

      &:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);

        .image-overlay {
          opacity: 1;
        }
      }

      &--selected {
        border: 2px solid rgb(var(--v-theme-primary));
        box-shadow: 0 0 0 1px rgba(var(--v-theme-primary), 0.3);
      }
    }

    .selection-checkbox {
      position: absolute;
      top: 8px;
      left: 8px;
      z-index: 3;
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 6px;
      padding: 2px;
      backdrop-filter: blur(4px);
    }

    .image-content {
      position: relative;
      border-radius: 12px 12px 0 0;
    }

    .image-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.3) 50%, rgba(0, 0, 0, 0.8) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }

    .overlay-actions {
      display: flex;
      gap: 8px;

      .v-btn {
        backdrop-filter: blur(8px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }
    }
  }

  .batch-actions-bar {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    min-width: 400px;
    backdrop-filter: blur(10px);
    border-radius: 16px;
  }

  .empty-state {
    padding: 4rem 0;
  }
}

// ÂìçÂ∫îÂºèË∞ÉÊï¥
@media (max-width: 960px) {
  .unified-image-manager {
    .image-grid {
      .image-col {
        padding: 6px;
      }

      .image-card {
        .image-content {
          height: 180px !important;
        }
      }

      .overlay-actions {
        gap: 6px;

        .v-btn {
          min-width: auto;
        }
      }
    }
  }
}

@media (max-width: 600px) {
  .unified-image-manager {
    .image-grid {
      .image-col {
        padding: 4px;
      }

      .image-card {
        .image-content {
          height: 160px !important;
        }

        .selection-checkbox {
          top: 4px;
          left: 4px;
        }
      }

      .overlay-actions {
        gap: 4px;

        .v-btn {
          size: x-small;
        }
      }
    }

    .batch-actions-bar {
      left: 10px;
      right: 10px;
      transform: none;
      min-width: auto;
    }
  }
}
</style>
