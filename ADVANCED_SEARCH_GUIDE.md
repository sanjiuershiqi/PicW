# 高级搜索功能使用指南

## 📋 功能概述

高级搜索功能为 PicW 提供了强大的多维度图片搜索能力，支持关键词、文件类型、大小、日期等多种筛选条件。

## 🎯 核心功能

### 1. 多维度筛选

#### 关键词搜索

- **功能**: 根据文件名进行模糊搜索
- **特性**:
  - 实时搜索建议
  - 常用搜索记录
  - 支持中英文搜索

#### 文件类型筛选

- **支持格式**: JPG, PNG, GIF, WebP, SVG, BMP, ICO
- **多选支持**: 可同时选择多种文件类型
- **快速筛选**: 一键选择常用格式

#### 文件大小筛选

- **预设选项**:
  - 小于 100KB
  - 100KB - 1MB
  - 1MB - 5MB
  - 大于 5MB
- **自定义范围**: 支持自定义最小/最大文件大小

#### 日期范围筛选

- **预设选项**:
  - 今天
  - 最近一周
  - 最近一月
  - 最近一年
- **自定义范围**: 支持自定义开始/结束日期

#### 路径筛选

- **目录指定**: 指定搜索的目录路径
- **递归搜索**: 可选择是否包含子目录
- **路径提示**: 自动提示可用路径

#### 收藏筛选

- **仅显示收藏**: 快速筛选已收藏的图片
- **组合筛选**: 可与其他条件组合使用

### 2. 排序功能

支持多种排序方式：

- **按名称**: 字母顺序排序
- **按大小**: 文件大小排序
- **按日期**: 上传时间排序
- **按类型**: 文件格式排序

每种排序都支持升序/降序切换。

### 3. 搜索历史

#### 自动记录

- 自动保存最近 20 次搜索
- 记录搜索条件和结果数量
- 显示搜索时间

#### 快速恢复

- 点击历史记录快速恢复搜索条件
- 查看历史搜索的结果数量
- 删除单条历史记录

#### 常用搜索

- 自动统计搜索频率
- 显示最常用的 5 个搜索词
- 快速应用常用搜索

## 🚀 使用方法

### 基础搜索流程

1. **打开高级搜索**

   - 点击工具栏的"高级搜索"按钮（放大镜+图标）
   - 或使用快捷键 `Ctrl+Shift+F`（待实现）

2. **设置筛选条件**

   - 在"筛选条件"标签页设置各项条件
   - 可以组合使用多个筛选条件
   - 实时显示已激活的筛选条件数量

3. **执行搜索**

   - 点击"搜索"按钮开始搜索
   - 等待搜索完成
   - 查看搜索结果

4. **查看结果**
   - 搜索结果显示在主界面
   - 支持网格/列表视图切换
   - 可以预览、下载、收藏图片

### 高级技巧

#### 1. 组合筛选

```
示例：查找最近一周上传的大于 1MB 的 PNG 图片
- 关键词: (留空或输入特定名称)
- 文件类型: PNG
- 文件大小: 1MB - 5MB
- 日期范围: 最近一周
```

#### 2. 精确搜索

```
示例：在特定目录查找特定名称的图片
- 关键词: logo
- 目录路径: /images/branding
- 包含子目录: 否
```

#### 3. 收藏管理

```
示例：查找收藏的大文件
- 仅显示收藏: 是
- 文件大小: 大于 5MB
- 排序方式: 按大小降序
```

## 📊 搜索历史管理

### 查看历史

1. 打开高级搜索对话框
2. 切换到"搜索历史"标签页
3. 查看所有历史搜索记录

### 恢复搜索

1. 在历史列表中找到目标搜索
2. 点击该记录
3. 自动恢复所有筛选条件
4. 切换回"筛选条件"标签页
5. 点击"搜索"重新执行

### 清空历史

1. 在"搜索历史"标签页
2. 点击"清空历史记录"按钮
3. 确认清空操作

## 🎨 界面说明

### 筛选条件标签页

- **关键词输入框**: 支持模糊搜索，显示常用搜索
- **文件类型选择器**: 多选下拉框，支持快速选择
- **大小范围按钮组**: 预设选项 + 自定义输入
- **日期范围按钮组**: 预设选项 + 日期选择器
- **路径输入框**: 指定搜索目录
- **收藏复选框**: 快速筛选收藏
- **排序选择器**: 排序方式和顺序

### 搜索历史标签页

- **历史列表**: 显示所有搜索记录
- **记录详情**: 显示搜索条件和结果数
- **操作按钮**: 恢复搜索、删除记录
- **清空按钮**: 清空所有历史

### 状态指示

- **筛选条件徽章**: 显示激活的筛选条件数量
- **搜索中状态**: 显示加载动画
- **结果提示**: 显示找到的图片数量

## 💡 最佳实践

### 1. 合理使用筛选条件

- 从宽泛到精确逐步添加条件
- 避免过度筛选导致无结果
- 使用预设选项提高效率

### 2. 利用搜索历史

- 保存常用搜索条件
- 定期清理无用历史
- 使用常用搜索快速访问

### 3. 优化搜索性能

- 指定具体目录减少搜索范围
- 使用文件类型筛选减少结果
- 避免在根目录进行全量搜索

### 4. 结果管理

- 使用排序功能快速定位
- 批量操作搜索结果
- 收藏重要图片便于后续查找

## 🔧 技术实现

### 架构设计

```
AdvancedSearchDialog (UI组件)
    ↓
AdvancedSearchStore (状态管理)
    ↓
advancedSearch API (搜索逻辑)
    ↓
GitHub API (数据源)
```

### 核心组件

- **AdvancedSearchDialog.vue**: 搜索对话框 UI
- **advancedSearch.ts**: 搜索 API 实现
- **advancedSearchStore.ts**: 状态管理和历史记录
- **cacheManager.ts**: 搜索结果缓存

### 性能优化

- **搜索缓存**: 缓存搜索结果 10 分钟
- **防抖处理**: 输入防抖 300ms
- **懒加载**: 结果分页显示
- **智能索引**: 预加载常用目录

## 🐛 常见问题

### Q: 搜索速度慢怎么办？

A:

1. 指定具体目录而不是搜索全部
2. 使用文件类型筛选减少范围
3. 避免在大型仓库中全量搜索
4. 利用缓存功能重复搜索

### Q: 搜索结果不准确？

A:

1. 检查筛选条件是否过于严格
2. 尝试使用更宽泛的关键词
3. 确认文件类型选择正确
4. 检查日期范围设置

### Q: 历史记录丢失？

A:

1. 历史记录保存在 LocalStorage
2. 清除浏览器数据会丢失历史
3. 最多保存 20 条记录
4. 可以导出重要搜索条件

### Q: 无法搜索到某些图片？

A:

1. 确认图片在指定目录中
2. 检查文件扩展名是否支持
3. 确认 GitHub Token 权限
4. 尝试刷新后重新搜索

## 📝 更新日志

### v1.0.0 (2024-01-08)

- ✨ 初始版本发布
- ✅ 支持多维度筛选
- ✅ 搜索历史记录
- ✅ 常用搜索统计
- ✅ 结果缓存优化

### 计划功能

- [ ] 搜索建议自动完成
- [ ] 智能搜索（模糊匹配）
- [ ] 搜索结果导出
- [ ] 保存搜索模板
- [ ] 快捷键支持
- [ ] 搜索统计分析

## 🤝 反馈与建议

如果您在使用过程中遇到问题或有改进建议，欢迎：

- 提交 GitHub Issue
- 发送反馈邮件
- 参与功能讨论

---

**提示**: 高级搜索功能会消耗 GitHub API 配额，建议合理使用以避免达到速率限制。
